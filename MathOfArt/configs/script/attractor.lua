maxi = arg[1]

width = arg[2]
height = arg[3]
scale = arg[4]
--Clifford Attractors
--0, 0, -1.3, -1.3, -1.8, -1.9
--0, 0, -1.4, 1.6, 1.0, 0.7
--0, 0, 1.7, 1.7, 0.6, 1.2
--0, 0, 1.7, 0.7, 1.4, 2.0
--0, 0, -1.7, 1.8, -1.9, -0.4
--0, 0, 1.1, -1.32, -1.03, 1.54
--0, 0, 0.77, 1.99, -1.31, -1.45
--0, 0, -1.9, -1.9, -1.9, -1.0
--0, 0, 0.75, 1.34, -1.93, 1.0
--0, 0, -1.32, -1.65, 0.74, 1.81
--0, 0, -1.6, 1.6, 0.7, -1.0
--0, 0, -1.7, 1.5, -0.5, 0.7

--De Jong attractors
--0, 0, -1.244, -1.251, -1.815, -1.908
--0, 0, 1.7, 1.7, 0.6, 1.2
--0, 0, 1.4, -2.3, 2.4, -2.1
--0, 0, -2.7, -0.09, -0.86, -2.2
--0, 0, -0.827, -1.637, 1.659, -0.943
--0, 0, -2.24, 0.43, -0.65, -2.43
--0, 0, 2.01, -2.53, 1.61, -0.33
--0, 0, 1.4, 1.56, 1.4, -6.56

--Svensson attractors
--0, 0, 1.5, -1.8, 1.6, 0.9
--0, 0, -1.78, 1.29, -0.09, -1.18
--0, 0, -0.91, -1.29, -1.97, -1.56
--0, 0, 1.4, 1.56, 1.4, -6.56

--Bedhead Attractor
--1, 1, -0.81, -0.92
--1, 1, -0.64, 0.76
--1, 1, 0.06, 0.98
--1, 1, -0.67, 0.83

--Fractal Dream Attractor
--0.1, 0.1, -0.966918, 2.879879, 0.765145, 0.744728
--0.1, 0.1, -2.8276, 1.2813, 1.9655, 0.597
--0.1, 0.1, -1.1554, -2.3419, -1.9799, 2.1828
--0.1, 0.1, -1.9956, -1.4528, -2.6206, 0.8517

--Hopalong attractors
--0, 0, 2.0, 1.0, 0.0
--0, 0, -11.0, 0.05, 0.5
--0, 0, 2.0, 0.05, 2.0
--0, 0, 1.1, 0.5, 1.0
--0, 0, 7.17, 8.44, 2.56
--0, 0, 7.8, 0.13, 8.15
--0, 0, 9.7, 1.6, 7.9

--Gumowski-Mira Attractor
--0.1, 0.1, 0.0, 0.5, -0.75
--0, 1, 0.008, 0.05, -0.496
--0.1, 0.1, 0.0, 0.5, -0.7509
--0, 1, 0.0, 0.5, -0.22
--0, 1, 0.008, 0.05, -0.9
--0, 1, 0.008, 0.05, -0.45
--0.1, 0.1, 0.008, 0.05, 0.16
--0, 0.5, 0.008, 0.05, -0.7
--0.5, 0, 0.0, 0.05, -0.2
--0.5, 0.5, 0.0, 0.05, -0.22
--0, 0.5, 0.0, 0.05, -0.31
--0, 0.5, 0.0, 0.05, -0.55
--0.5, 0.5, 0.0, 0.05, -0.23
--0.5, 0.5, 0.009, 0.05, 0.32
--0.1, 0.1, 0.0, 0.5, -0.65
--0.0, 0.5, 0.0, 0, -0.578
--0.0, 0.5, 0.0, 0, -0.604
--0.0, 0.5, 0.0, 0, 0.228
--0.0, 0.5, 0.0, 0, -0.002
--0.0, 0.5, 0.0, 0, -0.623

--Symmetric Icon Attractor
--0.01, 0.01, 1.8, 0.0, 1.0, 0.1, -1.93, 5
--0.01, 0.01, 5.0, -1.0, 1.0, 0.188, -2.5, 5
--0.01, 0.01, -1.0, 0.1, -0.82, 0.12, 1.56, 3
--0.01, 0.01, 1.806, 0.0, 1.0, 0.0, -1.806, 5
--0.01, 0.01, 10.0, -12.0, 1.0, 0.0, -2.195, 3
--0.01, 0.01, -2.5, 0.0, 0.9, 0.0, 2.5, 3
--0.01, 0.01, 3.0, -16.79, 1.0, 0.0, -2.05, 9
--0.01, 0.01, 5.0, 1.5, 1.0, 0.0, -2.7, 6
--0.01, 0.01, 1.0, -0.1, 0.167, 0.0, -2.08, 7
--0.01, 0.01, 2.32, 0.0, 0.75, 0.0, -2.32, 5
--0.01, 0.01, -2.0, 0.0, -0.5, 0.0, 2.6, 5
--0.01, 0.01, 2.0, 0.2, 0.1, 0.0, -2.34, 5
--0.01, 0.01, 2.0, 0.0, 1.0, 0.1, -1.86, 4
--0.01, 0.01, -1.0, 0.1, -0.82, 0.0, 1.56, 3
--0.01, 0.01, -1.0, 0.03, -0.8, 0.0, 1.455, 3
--0.01, 0.01, -2.5, -0.1, 0.9, -0.15, 2.39, 16

function G(x, mu)
	return mu * x + 2 * (1 - mu) * x*x / (1.0 + x*x)
end

x0 = 0
y0 = 0
a = -1.3
b = -1.3
c = -1.8
d = -1.9
e = 0
f = 0

x0 = 0
y0 = 0
a = 1.1
b = 0.5
c = 1.0
d = 0.0
e = 0
f = 0



xs = {}
ys = {}
xs[0] = x0
ys[0] = y0
i = 0
grid = {}
for i = 0, height do
    grid[i] = {}
    for j = 0, width do
        grid[i][j] = 0
    end
end


while (i < maxi) do
	--Clifford Attractors x y a b c d
	--xs[i+1] = math.sin(a * ys[i]) + c * math.cos(a * xs[i])
	--ys[i+1] = math.sin(b * xs[i]) + d * math.cos(b * ys[i])

	--De Jong attractors x, y, a, b, c, d
	--xs[i+1] = math.sin(a * ys[i]) + math.cos(a * xs[i])
	--ys[i+1] = math.sin(b * xs[i]) + math.cos(b * ys[i])

	--Svensson attractors
	--xs[i+1] = d * math.sin(a * ys[i]) - c * math.sin(b * xs[i])
	--ys[i+1] = c * math.cos(a * xs[i]) + d * math.cos(b * ys[i])

	--Symmetric Icon Attractor x, y, a, b, g, om, l, d
	--zzbar = xs[i]*xs[i] + ys[i]*ys[i]
	--p = a*zzbar + l
	--zreal = x
	--zimag = y
	--for i = 1, d-1 do
	--	za = zreal * xs[i] - zimag * ys[i]
	--	zb = , zimag * xs[i] + zreal * ys[i]
	--	zreal = za
	--	zimag = zb
	--end
	--zn = xs[i]*zreal - ys[i]*zimag
	--p = p+ b*zn
	--xs[i+1] = p*xs[i] + g*zreal - om*ys[i]
	--ys[i+1] = p*ys[i] - g*zimag + om*xs[i]

	--Gumowski-Mira Attractor x, y, a, b, d
	--xn = ys[i] + a*(1 - b*ys[i]*ys[i])*ys[i] + G(x, d)
	--yn = -xs[i] + G(xn, d)
	--xs[i+1]=xn
	--ys[i+1]=yn

	--Hopalong attractors x, y, a, b, c

	s = 1
	if xs[i] < 0 then
		s = -1
	end
	xs[i+1] = ys[i] - math.sqrt(math.abs(b * xs[i] - c)) * s
	ys[i+1] = a - xs[i]

	--Fractal Dream Attractor x, y, a, b, c, d
	--xs[i+1] = math.sin(ys[i]*b)+c*sin(xs[i]*b)
	--ys[i+1] = math.sin(xs[i]*a)+d*sin(ys[i]*a)

	--Bedhead Attractor x, y, a, b
	--xs[i+1] = math.sin(x*ys[i]/b)*ys[i] + math.cos(a*xs[i]-ys[i])
	--ys[i+1] = xs[i] + math.sin(ys[i])/b

	--Svensson attractors x, y, a, b, c, d
	--xs[i+1] = d * math.sin(a * xs[i]) - sin(b * ys[i])
	--ys[i+1] = c * math.cos(a * xs[i]) + cos(b * ys[i])

	x = math.floor(xs[i]*scale)
	y = math.floor(ys[i]*scale)
	
	if (x < -width / 2 or y < -height / 2 or x > width / 2 or y > height / 2) then goto continue end
	grid[y+height/2][x+width/2] = grid[y+height/2][x+width/2] + 1
	::continue::
	i = i + 1
end

file = io.open("attractorGrid.txt", "w")
for i = 0, height do
	for j = 0, width do
		file:write(grid[i][j])
		file:write(" ")
	end
	file:write("\n")
end
file:close()


